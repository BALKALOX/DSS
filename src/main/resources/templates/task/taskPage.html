<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>–ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–¥–∞—á—ñ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
<header class="fixed top-0 left-0 w-full z-50 bg-white shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
        <a href="/tasks" class="text-2xl font-bold text-blue-600">DSS –°–∏—Å—Ç–µ–º–∞</a>

        <nav class="flex items-center gap-6 text-gray-700 font-semibold">
            <a href="/tasks" class="hover:text-blue-600">–ó–∞–¥–∞—á—ñ</a>
            <a href="/decisions" class="hover:text-blue-600">–†—ñ—à–µ–Ω–Ω—è</a>
            <a href="/roles" id="role-link" class="hover:text-blue-600 hidden">–†–æ–ª—ñ</a>
            <a href="/users" id="users-link" class="hover:text-blue-600 hidden">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</a>
            <a href="/login" id="login-link" class="hover:text-blue-600">–í—Ö—ñ–¥</a>
            <a href="#" id="logout-link" class="hover:text-red-600 hidden">–í–∏–π—Ç–∏</a>
        </nav>
    </div>
</header>

<div class="max-w-6xl mx-auto pt-24">
    <h1 class="text-3xl font-bold mb-4">–ó–∞–¥–∞—á–∞: <span th:text="${task.title}" class="text-blue-600"></span></h1>
    <p class="mb-2 text-gray-700"><strong>–û–ø–∏—Å:</strong> <span th:text="${task.description}"></span></p>
    <p class="mb-2 text-gray-700"><strong>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</strong>
        <span class="task-category" th:text="${task.category.label}"></span>
    </p>
    <p class="mb-6 text-gray-700"><strong>–°—Ç–∞—Ç—É—Å:</strong> <span th:text="${task.status.label}"></span></p>

    <h2 class="text-2xl font-semibold mb-4">–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–¥–∞—á—ñ</h2>
    <table id="task-parameters-table" class="w-full border text-sm mb-8">
        <thead class="bg-gray-200">
        <tr>
            <th class="p-2 border">–ù–∞–∑–≤–∞</th>
            <th class="p-2 border">–í–∞–≥–∞</th>
            <th class="p-2 border">–û–¥–∏–Ω–∏—Ü—è</th>
            <th class="p-2 border">–ù–∞–ø—Ä—è–º–æ–∫ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="parameter : ${task.taskParameters}">
            <td class="p-2 border" th:text="${parameter.name}"></td>
            <td class="p-2 border" th:text="${parameter.weight}"></td>
            <td class="p-2 border" th:text="${parameter.unit}"></td>
            <td class="p-2 border" th:text="${parameter.optimizationDirection.label}"></td>
        </tr>
        </tbody>
    </table>

    <div id="create-decision-container" class="text-center mt-6">

    </div>

    <!-- üìò –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏—Ö –º–æ–¥–∞–ª–æ–∫ -->
    <div class="fixed bottom-6 right-6 z-40 space-y-2">
        <button onclick="openAHPHelpModal()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded shadow-lg">‚ÑπÔ∏è AHP</button>
        <button onclick="openTopsisHelpModal()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded shadow-lg">‚ÑπÔ∏è TOPSIS</button>
        <button onclick="openElectreHelpModal()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded shadow-lg">‚ÑπÔ∏è ELECTRE</button>
    </div>

    <h2 class="text-2xl font-semibold mb-4">–†—ñ—à–µ–Ω–Ω—è</h2>
    <div class="space-y-6">
        <div th:each="decision : ${task.decisions}"
             class="bg-white p-4 rounded-lg shadow"
             style="display: block"
             th:attr="data-decision-id=${decision.id}, data-decision-user-id=${decision.user.id}"
             >

        <a th:href="@{'/decisions/'+${decision.id}}" class="text-xl font-bold mb-2 " th:text="${decision.title}"></a>
            <p class="text-gray-600 mb-2">
                <strong>–û–ø–∏—Å:</strong> <span th:text="${decision.description}"></span> </br>
                <strong>–¢–∏–ø:</strong> <span th:text="${decision.task.category.label}"></span> |
                <strong>–°—Ç–∞—Ç—É—Å:</strong> <span th:text="${decision.decisionStatus.ukrName}"></span>
            </p>
            <p class="text-gray-700 mb-4">
                <strong>–ê–≤—Ç–æ—Ä:</strong> <span th:text="${decision.user.name}"></span> (<span th:text="${decision.user.roles[0].ukrName}"></span>)
            </p>

            <h4 class="font-semibold">–°—Ü–µ–Ω–∞—Ä—ñ—ó:</h4>
            <ul class="list-disc ml-6 mb-4" th:if="${decision.scenarios != null}">
                <li th:each="scenario : ${decision.scenarios}">
                    <span th:text="${scenario.title}"></span> ‚Äì
                    <span th:text="${scenario.description}"></span>
                    (<em>–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å: <span th:text="${scenario.possibility * 100}"></span>%</em>)
                </li>
            </ul>

            <h4 class="font-semibold">–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ä—ñ—à–µ–Ω–Ω—è:</h4>
            <table class="w-full border text-sm mt-2">
                <thead class="bg-gray-100">
                <tr>
                    <th class="p-2 border">–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                    <th class="p-2 border">–ó–Ω–∞—á–µ–Ω–Ω—è</th>
                    <th class="p-2 border">–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="parameter : ${decision.decisionParameters}">
                    <td class="p-2 border" th:text="${parameter.taskParameter.name}"></td>
                    <td class="p-2 border" th:text="${parameter.value + ' ' + parameter.taskParameter.unit}"></td>
                    <td class="p-2 border" th:text="${parameter.comment}"></td>\
                </tr>
                </tbody>
            </table>
            <p class="text-gray-600 mb-2">
                <strong>–†–µ–π—Ç–∏–Ω–≥:</strong>
                <span th:text="${#numbers.formatDecimal(decision.getRate(), 1, 2) + '/10'}"></span>
                <br>
                <strong>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ü—ñ–Ω–æ–∫:</strong> <span th:text="${decision.getExpertEvaluations().size()}"></span>

            </p>
        </d>
    </div>
</div>

    <!-- üîç –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ –º–æ–¥–∞–ª–∫–∞ –ø—Ä–æ –º–µ—Ç–æ–¥–∏ -->
    <div id="method-info-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg shadow-lg max-w-3xl w-full">
            <h2 class="text-2xl font-bold mb-4 text-center">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –º–µ—Ç–æ–¥–∏</h2>
            <div class="space-y-4 text-sm text-gray-700">
                <div>
                    <h3 class="font-semibold text-lg text-indigo-700">AHP (Analytic Hierarchy Process)</h3>
                    <p>–ú–µ—Ç–æ–¥ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –∫—Ä–∏—Ç–µ—Ä—ñ—ó —ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –≤ –ø–∞—Ä–∞—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–∞—Ç—Ä–∏—Ü—é –ø–∞—Ä–Ω–∏—Ö –ø–æ—Ä—ñ–≤–Ω—è–Ω—å. –í—ñ–Ω –∫–æ—Ä–∏—Å–Ω–∏–π, –∫–æ–ª–∏ —î –±–∞–≥–∞—Ç–æ —Å—É–±'—î–∫—Ç–∏–≤–Ω–∏—Ö –æ—Ü—ñ–Ω–æ–∫ –∞–±–æ –Ω–µ—á—ñ—Ç–∫–∏—Ö –¥–∞–Ω–∏—Ö.</p>
                </div>
                <div>
                    <h3 class="font-semibold text-lg text-purple-700">TOPSIS (Technique for Order Preference by Similarity to Ideal Solution)</h3>
                    <p>–ú–µ—Ç–æ–¥, —â–æ –≤–∏–±–∏—Ä–∞—î –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É, —è–∫–∞ —î –Ω–∞–π–±–ª–∏–∂—á–æ—é –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ—ó (–Ω–∞–π–∫—Ä–∞—â–æ—ó) —ñ –Ω–∞–π–¥–∞–ª—å—à–æ—é –≤—ñ–¥ –Ω–∞–π–≥—ñ—Ä—à–æ—ó. –î–æ–±—Ä–µ –ø—Ä–∞—Ü—é—î –ø—Ä–∏ —á—ñ—Ç–∫–∏—Ö —á–∏—Å–ª–æ–≤–∏—Ö –∫—Ä–∏—Ç–µ—Ä—ñ—è—Ö —ñ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤.</p>
                </div>
                <div>
                    <h3 class="font-semibold text-lg text-emerald-700">ELECTRE (ELimination Et Choix Traduisant la REalit√©)</h3>
                    <p>–ú–µ—Ç–æ–¥ –ø–µ—Ä–µ–≤–∞–≥, —è–∫–∏–π –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ —ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø–æ—Ä–æ–≥—ñ–≤ –∑–≥–æ–¥–∏/–Ω–µ–∑–≥–æ–¥–∏. –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∞–∂–∫–æ –æ–±'—î–¥–Ω–∞—Ç–∏ –≤—Å—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó –≤ –æ–¥–Ω–µ —á–∏—Å–ª–æ, —ñ –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–º–ø—Ä–æ–º—ñ—Å–Ω–∏–π –≤–∏–±—ñ—Ä.</p>
                </div>
            </div>
            <div class="flex justify-center mt-6">
                <button onclick="document.getElementById('method-info-modal').classList.add('hidden')"
                        class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded">–ó–∞–∫—Ä–∏—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- üìò –ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –º–æ–¥–∞–ª–∫–∏ -->
    <div class="fixed bottom-20 right-6 z-40">
        <button onclick="document.getElementById('method-info-modal').classList.remove('hidden')"
                class="bg-sky-600 hover:bg-sky-700 text-white px-4 py-2 rounded shadow-lg">
            ‚ÑπÔ∏è –ü—Ä–æ –º–µ—Ç–æ–¥–∏
        </button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
<div id="ahp-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-4xl">
        <h2 class="text-2xl font-bold mb-6 text-center">–í–≤–µ–¥—ñ—Ç—å –º–∞—Ç—Ä–∏—Ü—é –ø–∞—Ä–Ω–∏—Ö –ø–æ—Ä—ñ–≤–Ω—è–Ω—å</h2>

        <div id="ahp-table-container" class="overflow-x-auto">
            <!-- –¢—É—Ç JS-–æ–º –≤—Å—Ç–∞–≤–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—è -->
        </div>

        <div class="flex justify-center gap-4 mt-8">
            <button id="submit-ahp" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded">
                –û–±—á–∏—Å–ª–∏—Ç–∏
            </button>
            <button id="cancel-ahp" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded">
                –°–∫–∞—Å—É–≤–∞—Ç–∏
            </button>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ ELECTRE -->
<div id="electre-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded shadow-lg w-full max-w-md">
        <h2 class="text-xl font-bold mb-4 text-center">–ü–æ—Ä–æ–≥–∏ ELECTRE</h2>
        <label class="block mb-2">
            –ü–æ—Ä—ñ–≥ C:
            <input type="number" id="c-threshold" class="w-full border p-2 rounded" step="0.01" value="0.5">
        </label>
        <label class="block mb-4">
            –ü–æ—Ä—ñ–≥ D:
            <input type="number" id="d-threshold" class="w-full border p-2 rounded" step="0.01" value="0.5">
        </label>
        <div class="flex justify-end gap-4">
            <button onclick="submitElectre()" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded">OK</button>
            <button onclick="closeElectreModal()" class="bg-gray-400 hover:bg-gray-500 text-white py-2 px-4 rounded">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è -->
    <div id="rate-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded shadow-lg w-full max-w-md">
            <h2 class="text-xl font-bold mb-4 text-center">–û—Ü—ñ–Ω–∏—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è</h2>
            <label class="block mb-2">–û—Ü—ñ–Ω–∫–∞ (0-10):</label>
            <input type="number" id="rate-score" class="w-full border p-2 rounded mb-4" min="0" max="10" step="0.1">
            <label class="block mb-2">–ö–æ–º–µ–Ω—Ç–∞—Ä (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
            <textarea id="rate-comment" class="w-full border p-2 rounded mb-4"></textarea>
            <div class="flex justify-end gap-4">
                <button onclick="submitRate()" class="bg-green-500 text-white py-2 px-4 rounded">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
                <button onclick="closeRateModal()" class="bg-gray-400 text-white py-2 px-4 rounded">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </div>
    </div>
</div>

<!-- AHP Help Modal -->
<div id="ahp-help-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full">
        <h2 class="text-xl font-bold mb-4 text-center">–ú–µ—Ç–æ–¥ AHP (–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–π –ø—Ä–æ—Ü–µ—Å)</h2>
        <p class="mb-4 text-gray-700">
            –ú–µ—Ç–æ–¥ AHP –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞—Ç—Ä–∏—Ü—é –ø–∞—Ä–Ω–∏—Ö –ø–æ—Ä—ñ–≤–Ω—è–Ω—å –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥–Ω–æ—Å–Ω–æ—ó –≤–∞–∂–ª–∏–≤–æ—Å—Ç—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó–≤. –î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ –∫—Ä–∏—Ç–µ—Ä—ñ—ó–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–≤–µ—Å—Ç–∏, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –∫—Ä–∏—Ç–µ—Ä—ñ–π –≤–∞–∂–ª–∏–≤—ñ—à–∏–π –∑–∞ —ñ–Ω—à–∏–π –∑–∞ —à–∫–∞–ª–æ—é –≤—ñ–¥ 1 –¥–æ 9:
        </p>
        <ul class="list-disc list-inside text-gray-700 mb-4">
            <li><strong>1</strong> ‚Äî –æ–¥–Ω–∞–∫–æ–≤–∞ –≤–∞–∂–ª–∏–≤—ñ—Å—Ç—å</li>
            <li><strong>3</strong> ‚Äî –ø–æ–º—ñ—Ä–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞ –æ–¥–Ω–æ–≥–æ –Ω–∞–¥ —ñ–Ω—à–∏–º</li>
            <li><strong>5</strong> ‚Äî —Å—É—Ç—Ç—î–≤–∞ –ø–µ—Ä–µ–≤–∞–≥–∞</li>
            <li><strong>7</strong> ‚Äî —è–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞</li>
            <li><strong>9</strong> ‚Äî –∞–±—Å–æ–ª—é—Ç–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞</li>
            <li><strong>2,4,6,8</strong> ‚Äî –ø—Ä–æ–º—ñ–∂–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è</li>
        </ul>
        <p class="text-gray-700">
            –ó–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–≤–ø—Ä–æ—Ç–∏ —ñ–Ω—à–æ—ó –∫–ª—ñ—Ç–∏–Ω–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è —è–∫ –æ–±–µ—Ä–Ω–µ–Ω–µ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –≤–∫–∞–∑–∞–ª–∏ "5", —Ç–æ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ–π –∫–æ–º—ñ—Ä—Ü—ñ –±—É–¥–µ "1/5".
        </p>
        <div class="flex justify-end">
            <button onclick="document.getElementById('ahp-help-modal').classList.add('hidden')" class="bg-blue-500 text-white px-4 py-2 rounded">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>
</div>

<!-- ELECTRE Help Modal -->
<div id="electre-help-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-xl w-full">
        <h2 class="text-xl font-bold mb-4 text-center">–ú–µ—Ç–æ–¥ ELECTRE</h2>
        <p class="mb-4 text-gray-700">
            –ú–µ—Ç–æ–¥ ELECTRE –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–≤–∞ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ —Ä—ñ—à–µ–Ω—å:
        </p>
        <ul class="list-disc list-inside text-gray-700 mb-4">
            <li><strong>–ü–æ—Ä—ñ–≥ —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è (C):</strong> –ø–æ–∫–∞–∑—É—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫—Ä–∞—â–∞ –∑–∞ —ñ–Ω—à—É –∑–∞ –≤—Å—ñ–º–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏ –∑–∞–≥–∞–ª–æ–º.</li>
            <li><strong>–ü–æ—Ä—ñ–≥ –Ω–µ—É–∑–≥–æ–¥–∂–µ–Ω–Ω—è (D):</strong> –≤–∏–∑–Ω–∞—á–∞—î, —á–∏ —î —Å—É—Ç—Ç—î–≤—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó, –¥–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –≥—ñ—Ä—à–∞ –∑–∞ —ñ–Ω—à—É.</li>
        </ul>
        <p class="mb-4 text-gray-700">
            –Ø–∫—â–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ A –º–∞—î –≤–∏—Å–æ–∫–∏–π C —ñ –Ω–∏–∑—å–∫–∏–π D –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ B, —Ç–æ A –ø–µ—Ä–µ–≤–∞–∂–∞—î B. –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ C —Ç–∞ D –º—ñ–∂ 0.4 —ñ 0.7 –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∂–æ—Ä—Å—Ç–∫–æ—Å—Ç—ñ –≤—ñ–¥–±–æ—Ä—É.
        </p>
        <div class="flex justify-end">
            <button onclick="document.getElementById('electre-help-modal').classList.add('hidden')" class="bg-blue-500 text-white px-4 py-2 rounded">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>
</div>

<!-- TOPSIS Help Modal -->
<div id="topsis-help-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full">
        <h2 class="text-xl font-bold mb-4 text-center">–ú–µ—Ç–æ–¥ TOPSIS</h2>
        <p class="mb-4 text-gray-700">
            –ú–µ—Ç–æ–¥ TOPSIS (Technique for Order Preference by Similarity to Ideal Solution) –≤–∏–±–∏—Ä–∞—î –Ω–∞–π–∫—Ä–∞—â—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤—ñ–¥—Å—Ç–∞–Ω—ñ –¥–æ —ñ–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è.
        </p>
        <ul class="list-disc list-inside text-gray-700 mb-4">
            <li>–†—ñ—à–µ–Ω–Ω—è –æ—Ü—ñ–Ω—é—é—Ç—å—Å—è –∑–∞ –≤—Å—ñ–º–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏ —Ç–∞ –Ω–æ—Ä–º–∞–ª—ñ–∑—É—é—Ç—å—Å—è.</li>
            <li>–†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –≤—ñ–¥—Å—Ç–∞–Ω—å –¥–æ —É–º–æ–≤–Ω–æ–≥–æ —ñ–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ç–∞ –∞–Ω—Ç–∏–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è.</li>
            <li>–ß–∏–º –±–ª–∏–∂—á–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–æ —ñ–¥–µ–∞–ª—É —ñ –¥–∞–ª—ñ –≤—ñ–¥ –∞–Ω—Ç–∏–∏–¥–µ–∞–ª—É ‚Äî —Ç–∏–º –≤–æ–Ω–∞ –∫—Ä–∞—â–∞.</li>
        </ul>
        <p class="text-gray-700">TOPSIS –Ω–∞–π–∫—Ä–∞—â–µ –ø—Ä–∞—Ü—é—î –ø—Ä–∏ –∫—ñ–ª—å–∫—ñ—Å–Ω–∏—Ö –∫—Ä–∏—Ç–µ—Ä—ñ—è—Ö —Ç–∞ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤.</p>
        <div class="flex justify-end">
            <button onclick="document.getElementById('topsis-help-modal').classList.add('hidden')" class="bg-blue-500 text-white px-4 py-2 rounded">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>
</div>
<script th:src="@{/js/taskPage.js}"></script>
<script th:src="@{/js/evaluation.js}"></script>
    <script>
        const token = localStorage.getItem('token');

        if (token) {
            document.getElementById('nav-login')?.classList.add('hidden');
            document.getElementById('nav-logout')?.classList.remove('hidden');

            fetch('/api/v1/auth/user', {
                headers: { 'Authorization': `Bearer ${token}` }
            })
                .then(res => res.ok ? res.json() : Promise.reject())
                .then(user => {
                    const roles = user.roles.map(r => r.name);
                    if (roles.includes('ROLE_ADMIN')) {
                        document.getElementById('nav-role')?.classList.remove('hidden');
                        document.getElementById('nav-users')?.classList.remove('hidden');
                    }
                })
                .catch(() => {
                    localStorage.removeItem('token');
                    window.location.href = '/login';
                });
        }

        document.getElementById('nav-logout')?.addEventListener('click', () => {
            localStorage.removeItem('token');
            window.location.href = '/login';
        });
    </script>

<script>
    function openAHPHelpModal() {
        const modal = document.getElementById('ahp-help-modal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function openElectreHelpModal() {
        const modal = document.getElementById('electre-help-modal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function openTopsisHelpModal() {
        const modal = document.getElementById('topsis-help-modal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

</script>
</body>
</html>
